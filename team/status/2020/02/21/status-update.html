<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>21st Feb 2020: IAC Team Status Update | Puppet IAC Team</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="21st Feb 2020: IAC Team Status Update" />
<meta name="author" content="dev_el_ops" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="The IAC team has been working on a lot of interesting things over the past week. Here’s a brief overview of what we’ve been up to:" />
<meta property="og:description" content="The IAC team has been working on a lot of interesting things over the past week. Here’s a brief overview of what we’ve been up to:" />
<link rel="canonical" href="https://puppetlabs.github.io/iac/team/status/2020/02/21/status-update.html" />
<meta property="og:url" content="https://puppetlabs.github.io/iac/team/status/2020/02/21/status-update.html" />
<meta property="og:site_name" content="Puppet IAC Team" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-02-21T00:00:00+00:00" />
<script type="application/ld+json">
{"description":"The IAC team has been working on a lot of interesting things over the past week. Here’s a brief overview of what we’ve been up to:","@type":"BlogPosting","headline":"21st Feb 2020: IAC Team Status Update","dateModified":"2020-02-21T00:00:00+00:00","url":"https://puppetlabs.github.io/iac/team/status/2020/02/21/status-update.html","datePublished":"2020-02-21T00:00:00+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://puppetlabs.github.io/iac/team/status/2020/02/21/status-update.html"},"author":{"@type":"Person","name":"dev_el_ops"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/iac/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://puppetlabs.github.io/iac/feed.xml" title="Puppet IAC Team" />
    <!-- Google Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-157301458-1', 'auto');
	ga('send', 'pageview', { 'page': location.pathname + location.search + location.hash});
	ga('set', 'anonymizeIp', true);
    </script>
    <!-- End Google Analytics -->
    </head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/iac/">Puppet IAC Team</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/iac/docs/">Docs</a><a class="page-link" href="/iac/modules/">Modules</a><a class="page-link" href="/iac/tools/">Tools</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">21st Feb 2020: IAC Team Status Update</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2020-02-21T00:00:00+00:00" itemprop="datePublished">Feb 21, 2020
      </time>• <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">dev_el_ops</span></span></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>The IAC team has been working on a lot of interesting things over the past week.
Here’s a brief overview of what we’ve been up to:</p>

<h2 id="updates-to-puppet-modules">Updates to Puppet Modules</h2>

<p>We’ve released only one module since last week:</p>

<ul>
  <li><a href="https://forge.puppet.com/puppetlabs/java">puppetlabs/java</a> (v6.2.0)</li>
</ul>

<h2 id="community-contributions">Community Contributions</h2>

<p>Thanks to <a href="https://github.com/baurmatt">@baurmatt</a> for his change to the concat module,
<a href="https://github.com/puppetlabs/puppetlabs-concat/pull/627">adding support for Deferred function in concat fragment</a>.</p>

<h2 id="approved-modules">Approved Modules</h2>

<p>This week we happily approved two new modules:</p>

<ul>
  <li>
    <p><a href="https://forge.puppet.com/fervid/secure_linux_cis">fervid/secure_linux_cis</a> is a CIS hardening module for Linux servers by <a href="https://www.fervid.us/">fervid.us</a>.</p>
  </li>
  <li>
    <p><a href="https://forge.puppet.com/stackstorm/st2">stackstorm/st2</a> installs, configures and manages the eponymous <a href="https://stackstorm.com">StackStorm</a> platform for event-driven runbook automation.</p>
  </li>
</ul>

<p><a href="https://forge.puppet.com/approved">Puppet Approved</a> modules are recommended by us for use with Puppet Open Source and Puppet Enterprise and meet our expectations for quality and usability.</p>

<h2 id="new-puppet-modulebuilder-gem">New puppet-modulebuilder Gem</h2>

<p>Work <a href="https://tickets.puppetlabs.com/browse/IAC-532">has started</a> on creating a <a href="https://github.com/puppetlabs/puppet-modulebuilder">puppet-modulebuilder</a> gem.
This will carry the actual functionality for <code class="language-plaintext highlighter-rouge">pdk build</code> and allow third-party tools to re-use the same functionality without having to pull in the whole PDK.
We expect a first release early next week.
Follow <a href="https://tickets.puppetlabs.com/browse/IAC-552">IAC-552</a> to get a notification when that happens.</p>

<p>Thanks a lot to <a href="https://github.com/glennsarti">Glenn</a> for helping out with the actual porting of the code.</p>

<h2 id="ongoing-litmus-conversions">Ongoing Litmus Conversions</h2>

<p>This week saw a flurry of PRs (through <a href="https://github.com/puppetlabs/pdksync">pdksync</a>) to <a href="https://tickets.puppetlabs.com/browse/IAC-215">update all our modules</a> to use the new <code class="language-plaintext highlighter-rouge">use_litmus</code> support in <a href="https://github.com/puppetlabs/pdk-templates">pdk-templates</a>.
This reduces the amount of configuration we need to carry in each module and validates the pdk-templates feature.</p>

<p>As expected, the last remaining modules to convert to <a href="https://github.com/puppetlabs/puppet_litmus">Litmus</a> were the ones we didn’t want to touch earlier for good reasons.</p>

<ul>
  <li><a href="https://github.com/puppetlabs/puppetlabs-powershell/pull/283">powershell</a> has been merged and is now running acceptance tests on Windows (appveyor), Linux and OS X (travis) in public.</li>
  <li><a href="https://github.com/puppetlabs/puppetlabs-sqlserver/pull/345">sqlserver</a> is still resisting,
not the least because we found several areas where the previous test suite was ignoring warnings that we now want to address.</li>
  <li><a href="https://github.com/puppetlabs/puppetlabs-vsphere/pull/172">vsphere</a> is progressing.
We don’t expect to enable PR-level testing on this one,
since it does require access to our internal VCenter.</li>
</ul>

<p>If you’re interested in porting a module to Litmus,
feel free to reach out to us during <a href="https://puppet.com/community/office-hours/">Office Hours</a> - we’ll be glad to help!</p>

<p>We’re also looking into updating litmus to make use of <a href="https://github.com/puppetlabs/bolt/blob/master/CHANGELOG.md#bolt-200">Bolt v2</a>.
See <a href="https://github.com/puppetlabs/puppet_litmus/pull/254">puppetlabs/puppet_litmus#254</a> if you want to follow along.</p>

<p>This week also saw a number of ruby <a href="https://travis-ci.org/puppetlabs/puppetlabs-mysql/jobs/653408974">segfaults</a> and <a href="https://travis-ci.org/puppetlabs/puppetlabs-mysql/jobs/652904009">deadlocks</a> during acceptance testing:</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>448.03s$ bundle exec rake litmus:acceptance:parallel
Running against 3 targets.
./home/travis/build/puppetlabs/puppetlabs-mysql/vendor/bundle/ruby/2.5.0/gems/concurrent-ruby-1.1.6/lib/concurrent-ruby/concurrent/atomic/ruby_thread_local_var.rb:113: [BUG] Segmentation fault at 0x000000000b4d76d5
ruby 2.5.3p105 (2018-10-18 revision 65156) [x86_64-linux]
</code></pre></div></div>

<p>or</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ bundle exec rake litmus:acceptance:parallel
Running against 2 targets.
.
No output has been received in the last 10m0s, this potentially indicates a stalled build or something wrong with the build itself.
Check the details on how to adjust your build configuration on: https://docs.travis-ci.com/user/common-build-problems/#build-times-out-because-no-output-was-received
The build has been terminated
</code></pre></div></div>

<p>We’re still working on figuring out what changed recently to trigger these.</p>

<h2 id="refactoring-stdlib-to-puppet4-function-api">Refactoring stdlib to Puppet4 function API</h2>

<p>Off the back of Ben’s <a href="https://binford2k.com/2019/11/27/automagic-function-port/">blog on the Puppet4 function API</a>,
work has started to move all functions in the <a href="https://forge.puppet.com/puppetlabs/stdlib">stdlib module</a> to the “new” API.
To quote Ben:</p>

<blockquote>
  <p>Each modern Puppet 4.x function is just a little faster and just a little safer
to use, meaning that as we all port our functions over, compilation times across
the ecosystem will get more and more performant. Modern Puppet 4.x functions
have improved thread safety, memory management, and load time. Even more
importantly, they’re isolated to the environment they’re loaded from.</p>

  <p>And as a developer, you’ll see benefits like namespaced function signatures,
automatic data type checking, multiple dispatches allowing you to easily handle
different kinds of function invocations, and vastly improved code reuse.</p>
</blockquote>

<p>If you want to follow along or provide feedback,
please avail yourself of <a href="https://tickets.puppetlabs.com/browse/IAC-114">IAC-114</a>.</p>

  </div><a class="u-url" href="/iac/team/status/2020/02/21/status-update.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/iac/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Puppet IAC Team</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Puppet IAC Team</li><li><a class="u-email" href="mailto:ia_content@puppet.com">ia_content@puppet.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/puppetlabs"><svg class="svg-icon"><use xlink:href="/iac/assets/minima-social-icons.svg#github"></use></svg> <span class="username">puppetlabs</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Team blog and list of maintained tools by and for the Puppet Infrastructure Automation Content Team.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
